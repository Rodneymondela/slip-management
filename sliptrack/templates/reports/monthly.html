{% extends 'layout.html' %}
{% block content %}
<h2 class="text-xl font-semibold mb-4">Monthly Report ({{ month }})</h2>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
  <div class="p-4 bg-white rounded shadow">Total incl. VAT: <b>R {{ '%.2f'|format(total) }}</b></div>
  <div class="p-4 bg-white rounded shadow">VAT amount: <b>R {{ '%.2f'|format(vat_total) }}</b></div>
  <div class="p-4 bg-white rounded shadow">Entries: <b>{{ cat_totals|length }}</b> categories</div>
</div>
<canvas id="catChart"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const labels = {{ cat_totals.keys()|list|tojson }};
const data = {{ cat_totals.values()|list|tojson }};
new Chart(document.getElementById('catChart'), {
  type: 'bar',
  data: { labels, datasets: [{ label: 'Total by Category (R)', data }] },
  options: { responsive: true, maintainAspectRatio: false, }
});
</script>
{% endblock %}
